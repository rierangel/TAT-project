import React, { useEffect, useState } from 'react'
import Layer from 'src/components/Layer'
import QueryLayer from 'src/components/Layer/QueryLayer/QueryLayer'
import Title from 'src/components/Layer/Title'
import { fetcher } from 'src/lib/Fetcher'

export default function Page() {

    const [data, setData] = useState()
    const [page, setPage] = useState()

    useEffect(() => {
        // page
        fetcher(`${process.env.NEXT_PUBLIC_URL_BACKEND}/paginas/16`)
            .then(res => setPage(res))
            .catch(error => console.log(error))

        // data
        fetcher(`${process.env.NEXT_PUBLIC_URL_BACKEND}/publicaciones/revista-tributaria/`)
            .then(res => setData(res))
            .catch(error => console.log(error))

    }, [])


    const path = `publicaciones/revista-tributaria`
    const query = `${process.env.NEXT_PUBLIC_URL_BACKEND}/${path}/`

    const NoticiasListQuery = QueryLayer(revistaDisplay, data, false, query, path)

    return (
        <Layer>
            <section>
                {page && <Title data={page[0]} />}
                <NoticiasListQuery />

            </section>
        </Layer>
    )
}



function revistaDisplay({ data, path }) {
    console.log(data);
    return (
        <div className="grid grid-col-1 sm:grid-cols-2 lg:grid-cols-3 gap-7">

            {data && data.map((v, i) => (
                <div key={i} className="border rounded-2xl  overflow-hidden">
                    <div className="h-[58%] bg-gray-300 flex-center p-[22px]">
                        <img src="/img/revista.png" alt="" />
                    </div>
                    <div className='py-6 px-9'>
                        <h3 className='mb-4'>{v.titulo}</h3>
                        <div className='flex gap-4'>

                            {/* <button className='primary icon'>
                                <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1.71094 7.78906C1.53482 7.61294 1.43587 7.37407 1.43587 7.125C1.43587 6.87593 1.53482 6.63706 1.71094 6.46094C1.88706 6.28482 2.12593 6.18587 2.375 6.18587C2.62407 6.18587 2.86294 6.28482 3.03906 6.46094L7.0625 10.4844V1.5C7.0625 1.25136 7.16127 1.0129 7.33709 0.837087C7.5129 0.661272 7.75136 0.5625 8 0.5625C8.24864 0.5625 8.4871 0.661272 8.66291 0.837087C8.83873 1.0129 8.9375 1.25136 8.9375 1.5V10.4844L12.9609 6.46094C13.1371 6.28482 13.3759 6.18587 13.625 6.18587C13.8741 6.18587 14.1129 6.28482 14.2891 6.46094C14.4652 6.63706 14.5641 6.87593 14.5641 7.125C14.5641 7.37407 14.4652 7.61294 14.2891 7.78906L8.66406 13.4141C8.48715 13.5887 8.24858 13.6866 8 13.6866C7.75142 13.6866 7.51285 13.5887 7.33594 13.4141L1.71094 7.78906ZM14.875 14.9375H1.125C0.87636 14.9375 0.637903 15.0363 0.462087 15.2121C0.286272 15.3879 0.1875 15.6264 0.1875 15.875C0.1875 16.1236 0.286272 16.3621 0.462087 16.5379C0.637903 16.7137 0.87636 16.8125 1.125 16.8125H14.875C15.1236 16.8125 15.3621 16.7137 15.5379 16.5379C15.7137 16.3621 15.8125 16.1236 15.8125 15.875C15.8125 15.6264 15.7137 15.3879 15.5379 15.2121C15.3621 15.0363 15.1236 14.9375 14.875 14.9375Z" fill="white" />
                                </svg>
                                Descargar
                            </button>

                            <button className='outline icon'>
                                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11.9398 1V9.125C11.9398 9.37364 11.841 9.6121 11.6652 9.78791C11.4894 9.96373 11.2509 10.0625 11.0023 10.0625C10.7537 10.0625 10.5152 9.96373 10.3394 9.78791C10.1636 9.6121 10.0648 9.37364 10.0648 9.125V3.26562L1.66636 11.6641C1.48945 11.8387 1.25088 11.9366 1.0023 11.9366C0.753726 11.9366 0.515152 11.8387 0.338239 11.6641C0.250839 11.577 0.181492 11.4735 0.134175 11.3595C0.0868573 11.2456 0.0625 11.1234 0.0625 11C0.0625 10.8766 0.0868573 10.7544 0.134175 10.6405C0.181492 10.5265 0.250839 10.423 0.338239 10.3359L8.73668 1.9375H2.8773C2.62866 1.9375 2.3902 1.83873 2.21439 1.66291C2.03857 1.4871 1.9398 1.24864 1.9398 1C1.9398 0.75136 2.03857 0.512903 2.21439 0.337087C2.3902 0.161272 2.62866 0.0625 2.8773 0.0625H11.0023C11.2509 0.0625 11.4894 0.161272 11.6652 0.337087C11.841 0.512903 11.9398 0.75136 11.9398 1Z" fill="#0054A4" />
                                </svg>

                                Abrir
                            </button> */}
                            

                            <a href={`${process.env.NEXT_PUBLIC_URL_BACKEND}/${path}/${v.descargar}`} rel="noreferrer" target="_blank"
                                className='btn primary icon'>
                                <i>
                                    <svg width="16" height="17" viewBox="0 0 16 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M1.71094 7.78906C1.53482 7.61294 1.43587 7.37407 1.43587 7.125C1.43587 6.87593 1.53482 6.63706 1.71094 6.46094C1.88706 6.28482 2.12593 6.18587 2.375 6.18587C2.62407 6.18587 2.86294 6.28482 3.03906 6.46094L7.0625 10.4844V1.5C7.0625 1.25136 7.16127 1.0129 7.33709 0.837087C7.5129 0.661272 7.75136 0.5625 8 0.5625C8.24864 0.5625 8.4871 0.661272 8.66291 0.837087C8.83873 1.0129 8.9375 1.25136 8.9375 1.5V10.4844L12.9609 6.46094C13.1371 6.28482 13.3759 6.18587 13.625 6.18587C13.8741 6.18587 14.1129 6.28482 14.2891 6.46094C14.4652 6.63706 14.5641 6.87593 14.5641 7.125C14.5641 7.37407 14.4652 7.61294 14.2891 7.78906L8.66406 13.4141C8.48715 13.5887 8.24858 13.6866 8 13.6866C7.75142 13.6866 7.51285 13.5887 7.33594 13.4141L1.71094 7.78906ZM14.875 14.9375H1.125C0.87636 14.9375 0.637903 15.0363 0.462087 15.2121C0.286272 15.3879 0.1875 15.6264 0.1875 15.875C0.1875 16.1236 0.286272 16.3621 0.462087 16.5379C0.637903 16.7137 0.87636 16.8125 1.125 16.8125H14.875C15.1236 16.8125 15.3621 16.7137 15.5379 16.5379C15.7137 16.3621 15.8125 16.1236 15.8125 15.875C15.8125 15.6264 15.7137 15.3879 15.5379 15.2121C15.3621 15.0363 15.1236 14.9375 14.875 14.9375Z" fill="white" />
                                    </svg>
                                </i>
                                Descargar
                            </a>

                            <a href={`${process.env.NEXT_PUBLIC_URL_BACKEND}${v.ver}`} rel="noreferrer" target="_blank"
                                className='btn outline icon'>
                                <i>
                                    <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M11.9398 1V9.125C11.9398 9.37364 11.841 9.6121 11.6652 9.78791C11.4894 9.96373 11.2509 10.0625 11.0023 10.0625C10.7537 10.0625 10.5152 9.96373 10.3394 9.78791C10.1636 9.6121 10.0648 9.37364 10.0648 9.125V3.26562L1.66636 11.6641C1.48945 11.8387 1.25088 11.9366 1.0023 11.9366C0.753726 11.9366 0.515152 11.8387 0.338239 11.6641C0.250839 11.577 0.181492 11.4735 0.134175 11.3595C0.0868573 11.2456 0.0625 11.1234 0.0625 11C0.0625 10.8766 0.0868573 10.7544 0.134175 10.6405C0.181492 10.5265 0.250839 10.423 0.338239 10.3359L8.73668 1.9375H2.8773C2.62866 1.9375 2.3902 1.83873 2.21439 1.66291C2.03857 1.4871 1.9398 1.24864 1.9398 1C1.9398 0.75136 2.03857 0.512903 2.21439 0.337087C2.3902 0.161272 2.62866 0.0625 2.8773 0.0625H11.0023C11.2509 0.0625 11.4894 0.161272 11.6652 0.337087C11.841 0.512903 11.9398 0.75136 11.9398 1Z" fill="#0054A4" />
                                    </svg>
                                </i>
                                abrir
                            </a>
                        </div>
                    </div>
                </div>
            ))}



        </div>
    )
}
